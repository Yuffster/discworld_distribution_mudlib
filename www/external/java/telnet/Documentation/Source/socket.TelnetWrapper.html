<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Mon Feb 23 10:46:39 CET 1998 -->
<a name="_top_"></a>
<title>
  Class socket.TelnetWrapper
</title>
</head>
<body>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-socket.html">This Package</a>  <a href="socket.TelnetIO.html#_top_">Previous</a>  <a href="Package-socket.html">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class socket.TelnetWrapper
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----socket.TelnetWrapper
</pre>
<hr>
<dl>
  <dt> public class <b>TelnetWrapper</b>
  <dt> extends <a href="java.lang.Object.html#_top_">Object</a>
</dl>
Wrapper for a Java Telnet call. 
To use, make a new TelnetWrapper() with the name or IP address of a host.
Then, for most uses, the easiest way is to call setPrompt() with the
expected prompt, then call login(), and a sequence of sendLine()'s
until you get what you want done.
<P>
If you don't know the prompt ahead of time, you have to do a sequence of
send() and wait() or receiveUntil() calls.  send() sends a string across
the telnet connection. Add a '\r' to the end if you want to
complete a command. wait() waits for an exact string from the other side
of the telnet connection, and returns nothing,
receiveUntil() also waits for a string, but returns all the data
that it received while waiting, including the string itself. 
Use this if you want the output from a command. Please note that
the telnet connection will usually echo the sent command. 
<P>
sendLine() is generally better, since it adds the '\r'
automatically, waits for the prompt before returning, and returns all
data received before the prompt, with the prompt itself cut off the
end, and the sent command cut off the beginning. login() and
sendLine() are implemented using send(), wait() and receiveUntil().
They can be freely mixed and matched.
<P>
Here is a simple example of the use of TelnetWrapper:
<PRE>
// creates a new file in /tmp, lists the directory to prove it done
{
  TelnetWrapper telnet = new TelnetWrapper("123.45.78.90");
  // setting the correct prompt ahead of time is very important 
  // if you want to use login and sendLine
  telnet.setPrompt("$ ");
  telnet.login("loginname", "password");
  // this is how you have to do it otherwise
  telnet.send("touch /tmp/TELNET_WRAPPER" + "\r");
  telnet.wait("$ ");
  // sendLine 1: adds the \r automatically, 2: waits for the prompt
  // before returning 3: returns what was printed from the command
  String ls = telnet.sendLine("ls /tmp");
  System.out.println(ls);
  // clean up
  telnet.disconnect();
} 
</PRE>
<dl>
  <dt> <b>Version:</b>
  <dd> 0.2 5/15/97 - added comments, replaced String += with
   StringBuffer.append() in receiveUntil(), added port constructor
  <dt> <b>Author:</b>
  <dd> George Ruban 3/4/97
    <dt> <b>See Also:</b>
    <dd> <a href="socket.TelnetIO.html#_top_">TelnetIO</a>
</dl>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/magenta-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#debug"><b>debug</b></a>
  <dd> Set to true for System.out.println debugging.
</dl>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#TelnetWrapper(java.lang.String)"><b>TelnetWrapper</b></a>(String)
  <dd> Connects to the default telnet port on the given host.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#TelnetWrapper(java.lang.String, int)"><b>TelnetWrapper</b></a>(String, int)
  <dd> Connects to a specific telnet port on the given host.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#available()"><b>available</b></a>()
  <dd> Returns bytes available to be read.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#disconnect()"><b>disconnect</b></a>()
  <dd> Ends the telnet connection.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#finalize()"><b>finalize</b></a>()
  <dd> Ends the telnet connection.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#login(java.lang.String, java.lang.String)"><b>login</b></a>(String, String)
  <dd> Logs in as a particular user and password.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#main(java.lang.String[])"><b>main</b></a>(String[])
  <dd> Telnet test driver.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#receive()"><b>receive</b></a>()
  <dd> Returns a String from the telnet connection.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#receiveBytes()"><b>receiveBytes</b></a>()
  <dd> Returns a byte array.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#receiveUntil(java.lang.String)"><b>receiveUntil</b></a>(String)
  <dd> Returns all data received up until a certain token.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#receiveUntil(java.lang.String, long)"><b>receiveUntil</b></a>(String, long)
  <dd> Returns all data received up until a certain token.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(byte[])"><b>send</b></a>(byte[])
  <dd> Sends bytes over the telnet connection.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(java.lang.String)"><b>send</b></a>(String)
  <dd> Sends a String to the remote host.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#sendLine(java.lang.String)"><b>sendLine</b></a>(String)
  <dd> Sends a line to the remote host, returns all data before the prompt.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setDefaultPrompt(java.lang.String)"><b>setDefaultPrompt</b></a>(String)
  <dd> Sets the default prompt used by all TelnetWrappers.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setLogin(java.lang.String, java.lang.String)"><b>setLogin</b></a>(String, String)
  <dd> Sets the default login used by TelnetWrappers.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setPrompt(java.lang.String)"><b>setPrompt</b></a>(String)
  <dd> Sets the expected prompt.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#unsetLogin()"><b>unsetLogin</b></a>()
  <dd> Turns off the default login of TelnetWrappers.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#wait(java.lang.String)"><b>wait</b></a>(String)
  <dd> Skip any received data until the token appears.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#wait(java.lang.String, long)"><b>wait</b></a>(String, long)
  <dd> Wait for a String or a timeout.
</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="debug"><img src="images/magenta-ball.gif" width=12 height=12 alt=" o "></a>
<b>debug</b>
<pre>
  public boolean debug
</pre>
<dl>
  <dd> Set to true for System.out.println debugging.
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="TelnetWrapper"></a>
<a name="TelnetWrapper(java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>TelnetWrapper</b>
<pre>
  public TelnetWrapper(<a href="java.lang.String.html#_top_">String</a> host) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Connects to the default telnet port on the given host. 
If the defaultLogin and defaultPassword are non-null, attempts login.
</dl>
<a name="TelnetWrapper(java.lang.String, int)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>TelnetWrapper</b>
<pre>
  public TelnetWrapper(<a href="java.lang.String.html#_top_">String</a> host,
                       int port) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Connects to a specific telnet port on the given host. 
If the defaultLogin and defaultPassword are non-null, attempts login.
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="wait(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="wait"><b>wait</b></a>
<pre>
  public void wait(<a href="java.lang.String.html#_top_">String</a> token) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Skip any received data until the token appears. 
More efficient than receiveUntil, but liable to fail on large
tokens that can be spread over several "send"s. In that case,
consider using receiveUntil and ignoring the return value.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> token - String to wait for
    <dt> <b>Throws:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> on problems with the socket connection
    <dt> <b>See Also:</b>
    <dd> <a href="#receiveUntil">receiveUntil</a>
  </dl>
</dl>
<a name="wait(java.lang.String, long)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="wait"><b>wait</b></a>
<pre>
  public void wait(<a href="java.lang.String.html#_top_">String</a> token,
                   long timeout) throws <a href="java.io.IOException.html#_top_">IOException</a>, <a href="socket.TimedOutException.html#_top_">TimedOutException</a>
</pre>
<dl>
  <dd> Wait for a String or a timeout. 
If time runs out, throws a TimedOutException.
Sleeps in intervals of 100 milliseconds until either receiving the
token or timeout.
<P>
More efficient than receiveUntil, but liable to fail on large
tokens that can be spread over several "send"s. In that case,
consider using receiveUntil and ignoring the return value.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> token - String to wait for
    <dd> timeout - time in milliseconds to wait (negative means wait forever)
    <dt> <b>Throws:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> on problems with the socket connection
    <dt> <b>Throws:</b> <a href="socket.TimedOutException.html#_top_">TimedOutException</a>
    <dd> if time runs out before token received
    <dt> <b>See Also:</b>
    <dd> <a href="#receiveUntil(String, long)">receiveUntil</a>
  </dl>
</dl>
<a name="available()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="available"><b>available</b></a>
<pre>
  public int available() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Returns bytes available to be read.  Since they haven't been
negotiated over, this could be misleading...
</dl>
<a name="receive()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="receive"><b>receive</b></a>
<pre>
  public <a href="java.lang.String.html#_top_">String</a> receive() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Returns a String from the telnet connection. Blocks
until one is available. No guarantees that the string is in
any way complete.
NOTE: uses Java 1.0.2 style String-bytes conversion.
</dl>
<a name="receiveBytes()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="receiveBytes"><b>receiveBytes</b></a>
<pre>
  public byte[] receiveBytes() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Returns a byte array. Blocks until data is available.
</dl>
<a name="receiveUntil(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="receiveUntil"><b>receiveUntil</b></a>
<pre>
  public <a href="java.lang.String.html#_top_">String</a> receiveUntil(<a href="java.lang.String.html#_top_">String</a> token) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Returns all data received up until a certain token.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> token - String to wait for
    <dt> <b>Throws:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> on problems with the socket connection
    <dt> <b>See Also:</b>
    <dd> <a href="#wait">wait</a>
  </dl>
</dl>
<a name="receiveUntil(java.lang.String, long)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="receiveUntil"><b>receiveUntil</b></a>
<pre>
  public <a href="java.lang.String.html#_top_">String</a> receiveUntil(<a href="java.lang.String.html#_top_">String</a> token,
                             long timeout) throws <a href="java.io.IOException.html#_top_">IOException</a>, <a href="socket.TimedOutException.html#_top_">TimedOutException</a>
</pre>
<dl>
  <dd> Returns all data received up until a certain token.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> token - String to wait for
    <dd> timeout - time in milliseconds to wait (negative means wait forever)
    <dt> <b>Throws:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> on problems with the socket connection
    <dt> <b>Throws:</b> <a href="socket.TimedOutException.html#_top_">TimedOutException</a>
    <dd> if time runs out before token received
    <dt> <b>See Also:</b>
    <dd> <a href="#wait(String, long)">wait</a>
  </dl>
</dl>
<a name="send(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
  public void send(<a href="java.lang.String.html#_top_">String</a> s) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Sends a String to the remote host.
NOTE: uses Java 1.0.2 style String-bytes conversion.
  <dl>
    <dt> <b>Throws:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> on problems with the socket connection
  </dl>
</dl>
<a name="sendLine(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="sendLine"><b>sendLine</b></a>
<pre>
  public <a href="java.lang.String.html#_top_">String</a> sendLine(<a href="java.lang.String.html#_top_">String</a> command) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Sends a line to the remote host, returns all data before the prompt.
Since telnet seems to rely on carriage returns ('\r'), 
one will be appended to the sent string, if necessary.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> command - command line to send
    <dt> <b>Returns:</b>
    <dd> whatever data the command produced before the prompt.
    <dt> <b>See Also:</b>
    <dd> <a href="#setPrompt">setPrompt</a>
  </dl>
</dl>
<a name="send(byte[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
  public void send(byte buf[]) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Sends bytes over the telnet connection.
</dl>
<a name="login(java.lang.String, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="login"><b>login</b></a>
<pre>
  public void login(<a href="java.lang.String.html#_top_">String</a> loginName,
                    <a href="java.lang.String.html#_top_">String</a> password) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Logs in as a particular user and password. 
Returns after receiving prompt.
</dl>
<a name="setPrompt(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setPrompt"><b>setPrompt</b></a>
<pre>
  public void setPrompt(<a href="java.lang.String.html#_top_">String</a> prompt)
</pre>
<dl>
  <dd> Sets the expected prompt. 
If this function is not explicitly called, the default prompt is used.
  <dl>
    <dt> <b>See Also:</b>
    <dd> <a href="#setDefaultPrompt">setDefaultPrompt</a>
  </dl>
</dl>
<a name="setDefaultPrompt(java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setDefaultPrompt"><b>setDefaultPrompt</b></a>
<pre>
  public static void setDefaultPrompt(<a href="java.lang.String.html#_top_">String</a> prompt)
</pre>
<dl>
  <dd> Sets the default prompt used by all TelnetWrappers.
This can be specifically overridden for a specific instance.
The default prompt starts out as "$ " until this function is called.
  <dl>
    <dt> <b>See Also:</b>
    <dd> <a href="#setPrompt">setPrompt</a>
  </dl>
</dl>
<a name="setLogin(java.lang.String, java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setLogin"><b>setLogin</b></a>
<pre>
  public static void setLogin(<a href="java.lang.String.html#_top_">String</a> login,
                              <a href="java.lang.String.html#_top_">String</a> password)
</pre>
<dl>
  <dd> Sets the default login used by TelnetWrappers.
If this method is called with non-null login and password,
all TelnetWrappers will attempt to login when first created.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> login - login name to use
    <dd> password - password to use
    <dt> <b>See Also:</b>
    <dd> <a href="#login">login</a>, <a href="#unsetLogin">unsetLogin</a>
  </dl>
</dl>
<a name="unsetLogin()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="unsetLogin"><b>unsetLogin</b></a>
<pre>
  public static void unsetLogin()
</pre>
<dl>
  <dd> Turns off the default login of TelnetWrappers.
After this method is called, TelnetWrappers will not
login until that method is explicitly called.
  <dl>
    <dt> <b>See Also:</b>
    <dd> <a href="#setLogin">setLogin</a>, <a href="#login">login</a>
  </dl>
</dl>
<a name="disconnect()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="disconnect"><b>disconnect</b></a>
<pre>
  public void disconnect() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Ends the telnet connection.
</dl>
<a name="finalize()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="finalize"><b>finalize</b></a>
<pre>
  public void finalize()
</pre>
<dl>
  <dd> Ends the telnet connection.
  <dl>
    <dt> <b>Overrides:</b>
    <dd> <a href="java.lang.Object.html#finalize()">finalize</a> in class <a href="java.lang.Object.html#_top_">Object</a>
  </dl>
</dl>
<a name="main(java.lang.String[])"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="main"><b>main</b></a>
<pre>
  public static void main(<a href="java.lang.String.html#_top_">String</a> args[]) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Telnet test driver.
Modeled after the IOtest.java example in the Telnet Applet.
Logs in to "host", creates a timestamped file in /tmp, lists the
/tmp directory to System.out, disconnects.  Shows off several
TelnetWrapper methods.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> args - host login password prompt
  </dl>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-socket.html">This Package</a>  <a href="socket.TelnetIO.html#_top_">Previous</a>  <a href="Package-socket.html">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
